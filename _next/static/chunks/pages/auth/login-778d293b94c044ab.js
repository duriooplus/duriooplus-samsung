(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{41609:function(n,e,t){var i=t(280),o=t(64160),r=t(35694),a=t(1469),l=t(98612),u=t(44144),d=t(25726),s=t(36719),c=Object.prototype.hasOwnProperty;n.exports=function(n){if(null==n)return!0;if(l(n)&&(a(n)||"string"==typeof n||"function"==typeof n.splice||u(n)||s(n)||r(n)))return!n.length;var e=o(n);if("[object Map]"==e||"[object Set]"==e)return!n.size;if(d(n))return!i(n).length;for(var t in n)if(c.call(n,t))return!1;return!0}},36407:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(42148)}])},42148:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return D}});var i=t(82729),o=t(85893),r=t(67294),a=t(41686),l=t(65735),u=t(81743),d=t(25675),s=t.n(d),c=t(86426),h={src:"/_next/static/media/bing.ebeed13b.png",height:1121,width:1121,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEVMaXHi39rt7++bRh8aFhQYHBpNNCEACAoLCw0LCwcKCgUWDwoKBgMcEQsSEBAmSx6tXjacYDWtXifRIiTWeGrck2CdkYjDzsrr//+zpp2HThvbTy+0XVfXKibLcD2eAkthAAAAG3RSTlMAXTn1pfz0ClIlMsJJ5nvgs4HDxfDAg3Qai14LNVMPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD9JREFUeJwdyEcOgCAUQMFH/9gQ7PX+xzS4mmSgiWAF6HoZ2gAgztkIhOx9+qeYa6xymmeq7st7zwrQx7opzQc9WgIOdxcTvQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},g=t(11163),w=t(21461),p=t(9473),v=t(28827),x=t(41609),m=t.n(x),f=t(5582),b=t.n(f),_=t(76160),A=t(30888),y=t(12129),k=t(22925);function C(){let n=(0,i._)(["\n        max-height: 100vh;\n        height: 100vh;\n        width: 100%;\n        background-image: url(",");\n        background-color: rgba(2, 205, 186, 1);\n        background-repeat: no-repeat;\n        object-fit: cover;\n        object-position: center;\n        background-size: cover;\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n\n        @media (max-width: 500px) {\n            justify-content: start;\n        }\n    "]);return C=function(){return n},n}function O(){let n=(0,i._)(["\n        font-size: 3.2vw;\n        font-weight: 700;\n        color: ",";\n        width: 100vw;\n        margin-top: 10vh;\n        margin-bottom: 2vw;\n        text-align: center;\n        @media (max-width: 500px) {\n            font-size: 4.8vw;\n        }\n    "]);return O=function(){return n},n}function T(){let n=(0,i._)(["\n        padding: 8px;\n        min-height: 46px;\n        height: 4.2vw;\n        width: 32vw;\n        border-radius: 10px;\n        background-color: ",";\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        box-shadow: 0 4px 2px -2px gray;\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n        };\n\n        @media (max-width: 500px) {\n            height: 2vw;\n            min-height: 40px;\n            width: 50vw;\n        }\n    "]);return T=function(){return n},n}function z(){let n=(0,i._)(["\n        height: 2vw;\n        width: 2vw;\n        margin-left: 1vw;\n        @media (max-width: 500px) {\n            height: 4vw;\n            width: 4vw;\n        }\n    "]);return z=function(){return n},n}function E(){let n=(0,i._)(["\n        width: 100%;\n        font-size: 1.6vw;\n        font-weight: 400;\n        margin-left: -2vw;\n        text-align: center;\n        color: ",";\n        border: 2px solid ",";\n        &:hover {\n            // border: 2px solid ",";\n            color: ",";\n        };\n        &:focus {\n            // border: 2px solid ",";\n            outline: none;\n        };\n        @media (max-width: 500px) {\n            font-size: 3vw;\n        }\n    "]);return E=function(){return n},n}function j(){let n=(0,i._)(["\n        padding: 8px;\n        min-height: 46px;\n        height: 4.2vw;\n        margin-top: 1vw;\n        width: 32vw;\n        border-radius: 10px;\n        background-color: ",";\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        box-shadow: 0 4px 2px -2px gray;\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n        };\n        @media (max-width: 500px) {\n            height: 2vw;\n            min-height: 40px;\n            width: 50vw;\n            margin-top: 1vh;\n        }\n    "]);return j=function(){return n},n}function B(){let n=(0,i._)(["\n        width: 100%;\n        font-size: 1.8vw;\n        font-weight: 500;\n        text-align: center;\n        color: ",";\n         @media (max-width: 500px) {\n            font-size: 3vw;\n        }\n    "]);return B=function(){return n},n}function M(){let n=(0,i._)(["\n        height: 57vh;\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        overflow: hidden;\n        z-index: 0;\n    "]);return M=function(){return n},n}function S(){let n=(0,i._)(["\n        position: absolute;\n        bottom: 4vh;\n        left: 7vw;\n        zIndex: 99,\n    "]);return S=function(){return n},n}function Z(){let n=(0,i._)(["\n        font-size: 2vw;\n        font-weight: 700;\n        color: ",";\n        @media (max-width: 500px) {\n            font-size: 4vw;\n        }\n    "]);return Z=function(){return n},n}function I(){let n=(0,i._)(["\n        position: absolute;\n        top: 1vw;\n        right: 1vw;\n        padding: 16px;\n        border-radius: 16px;\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n        };\n    "]);return I=function(){return n},n}let P={ButtonClose:{position:"absolute",top:"1vw",right:"1vw",padding:"16px",borderRadius:"16px"},ButtonEmail:{padding:"8px",minHeight:"46px",height:"4.2vw",marginTop:"1vw",width:"32vw",borderRadius:"10px",backgroundColor:u.O.background,display:"flex",flexDirection:"row",alignItems:"center",boxShadow:"0 4px 2px -2px gray"}},R={Container:a.ZP.div(C(),l.Z.src),Title:a.ZP.h2(O(),u.O.white),ButtonGoogle:a.ZP.button(T(),u.O.white,u.O.transparent,u.O.white,u.O.background,u.O.white),IconButton:a.ZP.div(z()),TextButton:a.ZP.p(E(),u.O.duriooBlack,u.O.transparent,u.O.white,u.O.white,u.O.white),ButtonEmail:a.ZP.button(j(),u.O.background,u.O.transparent,u.O.white,u.O.orange2,u.O.white),TextEmail:a.ZP.p(B(),u.O.white),ImageBg:a.ZP.div(M()),ImageLabel:a.ZP.div(S()),TextImage:a.ZP.h4(Z(),u.O.white),ContainerClose:a.ZP.button(I(),u.O.transparent,u.O.white,u.O.orange2,u.O.white)};var D=()=>{let n=(0,g.useRouter)(),e=(0,p.I0)(),[t,i]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[x,f]=(0,r.useState)({}),{userAgent:C,location:O,avatar:T,age_selection:z,tag_selection:E,userData:j,payload_billing:B,isLogin:M,setting:S,guestData:Z}=(0,p.v9)(n=>n.auth),I=(0,k.o)((null==S?void 0:S.language)||"MY"),[D,X]=(0,r.useState)({}),Y=(0,r.useCallback)(()=>{e((0,v.zf)()),setTimeout(()=>{n.push("/featured")},500),setTimeout(()=>{l(!1),i(!1)},800)},[e]),F=(0,r.useCallback)(async e=>{let{age_selection:t,tag_selection:i}=j,o={id:e,profile_avatar_id:j._id||T,age_selection:m()(t)||""===t[0]?z:t,tag_selection:m()(i)||""===i[0]?E:i},r=await (0,w.iz)(o);(null==r?void 0:r.data)?Y():(setTimeout(()=>{l(!1)},500),n.push("/error"))},[j,T,z,E]),L=(0,r.useCallback)(async t=>{let i=await (0,w.M1)(t);if(null==i?void 0:i.data){let t=null==i?void 0:i.data,{_id:o,profile_avatar_id:r,limit_free_video:a}=t;e((0,v.M)({...t,id:o})),e((0,v.J0)(a)),r?(e((0,v.iW)(r)),Y()):T?F(o):n.push("/onboarding")}else setTimeout(()=>{l(!1)},500),n.push("/error")},[T,e]),N=(0,r.useCallback)(async e=>{let t=await (0,w.eQ)({id:e,status:"ACTIVE"});(null==t?void 0:t.data)?L(e):(setTimeout(()=>{l(!1)},500),n.push("/error"))},[]),W=(0,r.useCallback)(async e=>{let t=await (0,w.YN)(e);(null==t?void 0:t.data)?N((null==t?void 0:t.data).subscriber_id):(setTimeout(()=>{l(!1)},500),n.push("/error"))},[]),Q=(0,r.useCallback)(async n=>{(null==B?void 0:B.status)==="SUCCESS"?W({...B,subscriber_id:n}):(null==B?void 0:B.status)==="RESTORE"?N(n):L(n)},[W,L,B]),U=(0,r.useCallback)(async e=>{let t={age_selection:"",city:(null==O?void 0:O.city)||"",country:(null==O?void 0:O.country_name)||"",country_code:(null==O?void 0:O.country_code2)||"MY",email:e.email,first_name:e.given_name,last_name:e.family_name,profile_avatar_id:T,state:(null==O?void 0:O.state_prov)||"",tag_selection:"",timezone:(null==O?void 0:O.time_zone.name)||""},o=await (0,w.Cs)(t);(null==o?void 0:o.data)?n.push({pathname:"/auth/otp",query:{email:e.email.replace("@","_")}}):(setTimeout(()=>{l(!1)},500),n.push("/error")),setTimeout(()=>{l(!1),i(!1)},500)},[]),H=(0,r.useCallback)(async t=>{let o=await (0,w.cg)({email:t.email,guest_id:Z.id,device_id:(null==C?void 0:C.device_id)||"",device_brand:(null==C?void 0:C.device_brand)||"",device_model:(null==C?void 0:C.device_model)||""});if(null==o?void 0:o.data){let n=o.data.data;if("User not found"===n.message)U(t);else if("Maximum allowed devices reached"===n.message)d(!0),setTimeout(()=>{l(!1),i(!1)},500);else{var r,a;let t=null!==(r=null==n?void 0:n.user)&&void 0!==r?r:{},i=null!==(a=null==n?void 0:n.token)&&void 0!==a?a:{};e((0,v.M)(t)),e((0,v.M8)({...i,expires_in:b()().add(29,"days").format("YYYY-MM-DD")})),e((0,v.kl)(!0)),Q(t.id)}}else n.push("/error")},[]),J=(0,r.useCallback)(async()=>{l(!0);let n=await (0,w.nm)({email:j.email,device_id:(null==C?void 0:C.device_id)||""});(null==n?void 0:n.data)&&H(j),setTimeout(()=>{i(!1),d(!1)},500)},[]),V=async n=>{let e=await (0,w.VL)(n);e&&((0,v.M)(e),H(e),X(e))};return(0,c.Nq)({onSuccess:n=>V(null==n?void 0:n.access_token),onError:n=>console.log("Login Failed:",n)}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A.Fb,{title:"Durioo+ | Login"}),(0,o.jsxs)(R.Container,{children:[a&&(0,o.jsx)(_.Om,{}),(0,o.jsx)(A.zx,{style:P.ButtonClose,onClick:()=>n.back(),children:(0,o.jsx)(s(),{alt:"durioo-close",src:y.Z,style:{width:"auto",height:"3vw"}})}),(0,o.jsx)(R.Title,{children:I.auth["login-using"]}),(0,o.jsx)(A.zx,{isFirst:!0,style:P.ButtonEmail,onClick:()=>n.push("/auth/login-email"),children:(0,o.jsx)(R.TextEmail,{children:I.auth["login-with-another-email"]})}),(0,o.jsxs)(R.ImageBg,{children:[(0,o.jsx)(s(),{alt:"durioo-next",src:h,style:{width:"auto",height:window.screen.width<500?"50vh":"72vh",marginTop:window.screen.width<500?"20vh":"0vh"}}),(0,o.jsx)(R.ImageLabel,{children:(0,o.jsx)(R.TextImage,{children:"Bing"})})]}),(0,o.jsx)(_.u8,{show:u,onClose:()=>d(!1),onSubmit:()=>{J()}})]})]})}}},function(n){n.O(0,[61,160,888,774,179],function(){return n(n.s=36407)}),_N_E=n.O()}]);