(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{41609:function(n,e,t){var i=t(280),o=t(64160),l=t(35694),r=t(1469),a=t(98612),u=t(44144),d=t(25726),s=t(36719),c=Object.prototype.hasOwnProperty;n.exports=function(n){if(null==n)return!0;if(a(n)&&(r(n)||"string"==typeof n||"function"==typeof n.splice||u(n)||s(n)||l(n)))return!n.length;var e=o(n);if("[object Map]"==e||"[object Set]"==e)return!n.size;if(d(n))return!i(n).length;for(var t in n)if(c.call(n,t))return!1;return!0}},28015:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/otp",function(){return t(63502)}])},63502:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return V}});var i=t(82729),o=t(85893),l=t(67294),r=t(41686),a=t(65735),u=t(81743),d=t(25675),s=t.n(d),c=t(30888),v={src:"/_next/static/media/riko.b941b60f.png",height:1725,width:1e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAMAAAAGL8UJAAAAOVBMVEXCnYW2saA6LSktJye8dk3NkWjPspjRooPIqpWtq5zGo4y3cEhWR0K5j3hoWld+aV2tkn26hWnKqpZnb6uDAAAAEHRSTlMB308ncP5rNB5DnrPg0EnzavK+2wAAAAlwSFlzAAALEwAACxMBAJqcGAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAArSURBVHicPcS3EQAgDACxJ9omw/7DcjSoEKHNAX6dLlB2BSTFvzkDyPpWuBoHANQaw1o6AAAAAElFTkSuQmCC",blurWidth:5,blurHeight:8},h=t(5555),g=t(12129),w=t(11163),p=t(9473),f=t(22925),x=t(28827),b=t(41609),m=t.n(b),_=t(21461),A=t(5582),k=t.n(A),O=t(76160),y=t(85035),C=t(33708);function T(){let n=(0,i._)(["\n        max-height: 100vh;\n        height: 100vh;\n        width: 100%;\n        background-image: url(",");\n        background-color: rgba(2, 205, 186, 1);\n        background-repeat: no-repeat;\n        object-fit: cover;\n        object-position: center;\n        background-size: cover;\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    "]);return T=function(){return n},n}function P(){let n=(0,i._)(["\n        font-size: 3.2vw;\n        font-weight: 700;\n        color: ",";\n        width: 100vw;\n        margin-top: 10vh;\n        margin-bottom: 3vw;\n        text-align: center;\n        @media (max-width: 500px) {\n            font-size: 4.2vw;\n        }\n    "]);return P=function(){return n},n}function j(){let n=(0,i._)(["\n        font-size: 2.2vw;\n        font-weight: 500;\n        color: ",";\n        @media (max-width: 500px) {\n            font-size: 3vw;\n\n        }\n    "]);return j=function(){return n},n}function S(){let n=(0,i._)(["\n        padding: 16px;\n        margin-top: 5vh;\n        opacity: ",";\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n            border-radius: 16px;\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n            border-radius: 16px;\n        };\n    "]);return S=function(){return n},n}function B(){let n=(0,i._)(["\n        position: absolute;\n        margin-top: ",";\n        width: ",";\n        text-align: center;\n        font-size: 2vw;\n        color: ",";\n        @media (max-width: 500px) {\n            font-size: 2.5vw;\n            margin-top: ",";\n            width: ",";\n        }\n    "]);return B=function(){return n},n}function Z(){let n=(0,i._)(["\n        height: 5vw;\n        color: ",";\n        border-radius: 8px;\n        width: 60vw;\n        padding: 8px;\n        font-size: 2.5vw;\n    "]);return Z=function(){return n},n}function z(){let n=(0,i._)(["\n        font-size: 1.4vw;\n        font-weight: 500;\n        margin-top: 4px;\n        color: ","\n    "]);return z=function(){return n},n}function E(){let n=(0,i._)(["\n        padding: 8px;\n        min-height: 46px;\n        height: 4.2vw;\n        width: 28vw;\n        border-radius: 10px;\n        background-color: ",";\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        box-shadow: 0 4px 2px -2px gray;\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n        };\n    "]);return E=function(){return n},n}function M(){let n=(0,i._)(["\n        height: 2vw;\n        width: 2vw;\n        margin-left: 1vw;\n    "]);return M=function(){return n},n}function R(){let n=(0,i._)(["\n        padding: 8px;\n        min-height: 46px;\n        height: 4.2vw;\n        margin-top: 3vw;\n        width: 28vw;\n        border-radius: 10px;\n        background-color: ",";\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        box-shadow: 0 4px 2px -2px gray;\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n        };\n    "]);return R=function(){return n},n}function W(){let n=(0,i._)(["\n        height: 60vh;\n        position: absolute;\n        bottom: 0;\n        left: 2.5vw;\n        overflow: hidden;\n        z-index: 0;\n    "]);return W=function(){return n},n}function F(){let n=(0,i._)(["\n        position: absolute;\n        bottom: 4vh;\n        right: 2vw;\n        zIndex: 99,\n    "]);return F=function(){return n},n}function I(){let n=(0,i._)(["\n        font-size: 2vw;\n        font-weight: 700;\n        color: ",";\n    "]);return I=function(){return n},n}function N(){let n=(0,i._)(["\n        display: flex;\n        flex-direction: row;\n        gap: 2vw;\n        margin-top: 30vh;\n        align-items: center;\n    "]);return N=function(){return n},n}function D(){let n=(0,i._)(["\n        font-size: 2vw;\n        font-weight: 400;\n        color: ",";\n    "]);return D=function(){return n},n}function U(){let n=(0,i._)(["\n        position: absolute;\n        top: 1vw;\n        right: 1vw;\n        padding: 16px;\n        border-radius: 16px;\n        border: 2px solid ",";\n        &:hover {\n            border: 2px solid ",";\n            background-color: ",";\n        };\n        &:focus {\n            border: 2px solid ",";\n            outline: none;\n        };\n\n    "]);return U=function(){return n},n}function L(){let n=(0,i._)(["\n        font-size: 2vw;\n        color: ",";\n        text-align: center;\n        margin-top: 1vh;\n    "]);return L=function(){return n},n}let q={Button:{padding:16,marginTop:"5vh",opacity:1},ButtonClose:{position:"absolute",top:"1vw",right:"1vw",padding:"16px",borderRadius:"16px"}},H={Container:r.ZP.div(T(),a.Z.src),Title:r.ZP.h2(P(),u.O.white),TextEmail:r.ZP.p(j(),u.O.white),Button:r.ZP.button(S(),n=>n.disable?.4:1,u.O.transparent,u.O.white,n=>n.disable?u.O.transparent:u.O.orange2,u.O.white),TextButton:r.ZP.p(B(),n=>n.isAll?"2.2vw":"1.3vw",n=>n.isAll?"23vw":"14vw",u.O.white,n=>n.isAll?"2.2vw":"4vw",n=>n.isAll?"23vw":"18vw"),Input:r.ZP.input(Z(),u.O.duriooBlack),MessageInput:r.ZP.p(z(),u.O.red),ButtonGoogle:r.ZP.button(E(),u.O.white,u.O.transparent,u.O.white,u.O.background,u.O.white),IconButton:r.ZP.div(M()),ButtonEmail:r.ZP.button(R(),u.O.background,u.O.transparent,u.O.white,u.O.orange2,u.O.white),ImageBg:r.ZP.div(W()),ImageLabel:r.ZP.div(F()),TextImage:r.ZP.h3(I(),u.O.white),ContainerRegister:r.ZP.div(N()),TextRegister:r.ZP.p(D(),u.O.white),ContainerClose:r.ZP.button(U(),u.O.transparent,u.O.white,u.O.orange2,u.O.white),TextError:r.ZP.p(L(),u.O.red)};var V=()=>{let n=(0,w.useRouter)(),e=(0,p.I0)(),{email:t}=n.query,{setting:i,userAgent:r,avatar:a,userData:u,payload_billing:d,isLogin:b,guestData:A}=(0,p.v9)(n=>n.auth),T=(0,f.o)((null==i?void 0:i.language)||"BM"),[P,j]=(0,l.useState)(""),[S,B]=(0,l.useState)(!1),[Z,z]=(0,l.useState)(!1),[E,M]=(0,l.useState)(!1),[R,W]=(0,l.useState)("Please disconnect another device\nto connect to this one"),[F,I]=(0,l.useState)(!0),[N,D]=(0,l.useState)(""),U=(0,l.useCallback)(()=>{e((0,x.kl)(!1)),M(!1),n.back()},[e,n]),L=(0,l.useCallback)(()=>{e((0,x.zf)()),setTimeout(()=>{n.push("/featured")},500),setTimeout(()=>{B(!1),I(!1)},800)},[e,n]);(0,l.useEffect)(()=>{console.log("email",t)},[]);let V=(0,l.useCallback)(async()=>{},[]),Y=(0,l.useCallback)(async()=>{let n=await (0,_.nm)({email:null==t?void 0:t.toString().replace("_","@"),device_id:(null==r?void 0:r.device_id)||""});(null==n?void 0:n.data)&&(U(),V()),setTimeout(()=>{I(!1),M(!1)},500)},[U]),J=(0,l.useCallback)(async e=>{let t={id:e,profile_avatar_id:(null==u?void 0:u._id)||a._id,age_selection:m()(null==u?void 0:u._age_selection)||(null==u?void 0:u._age_selection[0])===""?null==u?void 0:u.age_selection:null==u?void 0:u._age_selection,tag_selection:m()(null==u?void 0:u._tag_selection)||(null==u?void 0:u._tag_selection[0])===""?null==u?void 0:u.tag_selection:null==u?void 0:u._tag_selection},i=await (0,_.iz)(t);(null==i?void 0:i.data)?L():(setTimeout(()=>{B(!1)},500),n.push("/error"))},[u,a,L]),G=(0,l.useCallback)(async t=>{let i=await (0,_.M1)(t);if(null==i?void 0:i.data){let t=i.data,{_id:o,profile_avatar_id:l,limit_free_video:r}=t;e((0,x.M)({...t,id:o})),e((0,x.J0)(r)),l?(e((0,x.iW)(l)),L()):(null==a?void 0:a._id)?J(o):n.push("/featured")}else setTimeout(()=>{B(!1)},500),n.push("/error")},[a,e]),K=(0,l.useCallback)(async e=>{let t=await (0,_.eQ)({id:e,status:""});(null==t?void 0:t.data)?G(e):(setTimeout(()=>{B(!1)},500),n.push("/error"))},[]),Q=(0,l.useCallback)(async e=>{let t=await (0,_.YN)(e);(null==t?void 0:t.data)?K((null==t?void 0:t.data).subscriber_id):(setTimeout(()=>{B(!1)},500),n.push("/error"))},[]),X=(0,l.useCallback)(async n=>{(null==d?void 0:d.status)==="SUCCESS"?Q({...d,subscriber_id:n}):(null==d?void 0:d.status)==="RESTORE"?K(n):G(n)},[Q,G,d]),$=(0,l.useCallback)(async()=>{let n=await (0,y.FF)();if(null==n?void 0:n.data){var t,i,o,l,r,a,u,d;let s=(null==n?void 0:null===(i=n.data)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.collections)||[],c=(null==n?void 0:null===(l=n.data)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.tags)||[],v=(null==n?void 0:null===(a=n.data)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.content_languages)||[],h=(null==n?void 0:null===(d=n.data)||void 0===d?void 0:null===(u=d.data)||void 0===u?void 0:u.dminis_status)||"less frequent";"less frequent"===h&&e((0,C.es)(4)),e((0,x.Lt)({collections:s,tags:c,content_languages:v,dminis_status:h}))}},[]),nn=(0,l.useCallback)(async()=>{B(!0);let i={email:null==t?void 0:t.toString().replace("_","@"),guest_id:(null==A?void 0:A.id)||"",otp:P,device_id:(null==r?void 0:r.device_id)||"",device_model:(null==r?void 0:r.device_model)||"",device_brand:(null==r?void 0:r.device_brand)||""},o=await (0,_.om)(i);if(null==o?void 0:o.data){let n=o.data.data;if(null==n?void 0:n.message)D(null==n?void 0:n.message),B(!1),(null==n?void 0:n.message)==="Maximum allowed devices reached"&&(z(!0),M(!0));else{var l,a;b&&(0,_.w7)({email:u.email,device_id:null==r?void 0:r.device_id});let t=null!==(l=null==n?void 0:n.user)&&void 0!==l?l:{},i=null!==(a=null==n?void 0:n.token)&&void 0!==a?a:{};e((0,x.M)(t)),e((0,x.M8)({...i,expires_in:k()().add(29,"days").format("YYYY-MM-DD")})),e((0,x.kl)(!0)),X(t.id),$()}}else setTimeout(()=>{B(!1)},500),n.push("/error")},[P,r,e,A,b]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Fb,{title:"Durioo+ | OTP"}),(0,o.jsxs)(H.Container,{children:[(0,o.jsx)(H.Title,{children:T.general["otp-has-been-sent"]}),(0,o.jsx)(H.TextEmail,{children:null==t?void 0:t.toString().replace("_","@")}),(0,o.jsx)(c.uZ,{length:4,onChange:n=>j(n)}),N&&(0,o.jsx)(H.TextError,{children:N}),Z?(0,o.jsxs)(c.zx,{isFirst:4==P.length,style:q.Button,onClick:()=>{M(!0)},disabled:P.length<4,children:[(0,o.jsx)(H.TextButton,{isAll:!0,children:"Logout From all Devices"}),(0,o.jsx)(s(),{alt:"durioo-next",src:h.Z,style:{width:"24vw",height:"auto"}})]}):(0,o.jsxs)(c.zx,{isFirst:4==P.length,style:q.Button,onClick:nn,disabled:P.length<4,children:[(0,o.jsx)(H.TextButton,{style:{marginTop:window.screen.width<500?4:8},isAll:!1,children:T.general.next}),(0,o.jsx)(s(),{alt:"durioo-next",src:h.Z,style:{width:window.screen.width<500?"18vw":"14vw",height:"auto"}})]}),(0,o.jsx)(H.ImageBg,{children:(0,o.jsx)(s(),{alt:"durioo-next",src:v,style:{width:"auto",height:window.screen.width<500?"70vh":"100vh",marginTop:window.screen.width<500?"10vh":"0vh"}})}),(0,o.jsx)(c.zx,{style:q.ButtonClose,onClick:()=>n.back(),children:(0,o.jsx)(s(),{alt:"durioo-close",src:g.Z,style:{width:"auto",height:window.screen.width<500?"6vw":"3vw"}})}),(0,o.jsx)(O.u8,{show:E,onClose:()=>M(!1),onSubmit:()=>{Y()}})]})]})}}},function(n){n.O(0,[61,160,888,774,179],function(){return n(n.s=28015)}),_N_E=n.O()}]);